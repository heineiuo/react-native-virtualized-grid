(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{90:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(0),i=n(40),u=n(85),a=n(4),o=n(28),c=n.n(o),h=n(8),d=n(9),l=n(13),s=Object(r.forwardRef)((function(e,t){var n=e.renderCell,i=e.column,u=e.row,a=e.coordinate,o=Object(r.useState)({rowIndex:u.rowIndex,columnIndex:i.columnIndex}),d=c()(o,2),s=d[0],m=d[1];return Object(r.useImperativeHandle)(t,(function(){return{update:function(e){m(e)}}}),[]),Object(l.jsx)(h.a.View,{style:{position:"absolute",width:i.widthAnimated,height:u.heightAnimated,transform:[{translateX:h.a.add(i.xAnimated,a.x)},{translateY:h.a.add(u.yAnimated,a.y)}]},children:n(s)})})),m=n(16),f=n.n(m),g=n(17),x=n.n(g),w=(function(){function e(){var t=this;f()(this,e),this.move=function(e){var n=Math.min(0,Math.max(t.minX,t.x-e.deltaX)),r=Math.min(0,Math.max(t.minY,t.y-e.deltaY));t.xAnimated.setValue(n),t.yAnimated.setValue(r)},this.xAnimated=new h.a.Value(0),this.yAnimated=new h.a.Value(0),this.containerWidthAnimated=new h.a.Value(0),this.containerHeightAnimated=new h.a.Value(0),this.contentWidthAnimated=new h.a.Value(0),this.contentHeightAnimated=new h.a.Value(0),this.minXAnimated=h.a.subtract(this.containerWidthAnimated,this.contentWidthAnimated),this.minYAnimated=h.a.subtract(this.containerWidthAnimated,this.contentWidthAnimated)}x()(e,[{key:"minX",get:function(){return JSON.parse(JSON.stringify(this.minXAnimated))}},{key:"minY",get:function(){return JSON.parse(JSON.stringify(this.minYAnimated))}},{key:"x",get:function(){return JSON.parse(JSON.stringify(this.xAnimated))}},{key:"y",get:function(){return JSON.parse(JSON.stringify(this.yAnimated))}},{key:"contentWidth",get:function(){return JSON.parse(JSON.stringify(this.contentWidthAnimated))}},{key:"contentHeight",get:function(){return JSON.parse(JSON.stringify(this.contentHeightAnimated))}},{key:"containerWidth",get:function(){return JSON.parse(JSON.stringify(this.containerWidthAnimated))}},{key:"containerHeight",get:function(){return JSON.parse(JSON.stringify(this.containerHeightAnimated))}}])}(),function(){function e(t){var n=t.x,r=t.width,i=t.columnIndex;f()(this,e),this.xAnimated=new h.a.Value(n),this.widthAnimated=new h.a.Value(r),this.columnIndex=i}return x()(e,[{key:"x",get:function(){return JSON.parse(JSON.stringify(this.xAnimated))}},{key:"width",get:function(){return JSON.parse(JSON.stringify(this.widthAnimated))}}]),e}()),y=function(){function e(t){var n=t.y,r=t.height,i=t.rowIndex;f()(this,e),this.yAnimated=new h.a.Value(n),this.heightAnimated=new h.a.Value(r),this.rowIndex=i}return x()(e,[{key:"y",get:function(){return JSON.parse(JSON.stringify(this.yAnimated))}},{key:"height",get:function(){return JSON.parse(JSON.stringify(this.heightAnimated))}}]),e}(),v=function(){function e(t){var n=t.column,i=t.row;f()(this,e),this.column=n,this.row=i,this.ref=Object(r.createRef)()}return x()(e,[{key:"x",get:function(){return this.column.x}},{key:"y",get:function(){return this.row.y}},{key:"width",get:function(){return this.column.width}},{key:"height",get:function(){return this.row.height}}]),e}();function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){var t=e.style,n=e.columnCount,i=e.rowCount,u=e.renderCell,o=e.getColumnWidth,m=void 0===o?function(){return 100}:o,f=e.getRowHeight,g=void 0===f?function(){return 40}:f,x=e.showColumnLine,I=void 0!==x&&x,O=e.showRowLine,A=void 0!==O&&O,p=Object(r.useRef)(null),j=Object(r.useState)(0),S=c()(j,2),N=S[0],J=S[1],k=Object(r.useRef)([]),V=Object(r.useRef)([]),C=Object(r.useRef)([]),R=Object(r.useRef)(new h.a.ValueXY({x:0,y:0})),X=Object(r.useRef)(new h.a.ValueXY({x:0,y:0})),W=Object(r.useCallback)((function(){for(var e=k.current[0],t=k.current[0],n=V.current[0],r=V.current[0],i=0;i<k.current.length;i++){var u=k.current[i];u.columnIndex<e.columnIndex&&(e=u),u.columnIndex>t.columnIndex&&(t=u)}for(var a=0;a<V.current.length;a++){var o=V.current[a];o.rowIndex<n.rowIndex&&(n=o),o.rowIndex>r.rowIndex&&(r=o)}return{minColumn:e,minRow:n,maxColumn:t,maxRow:r}}),[]),Y=Object(r.useCallback)((function(e){var t,n,r=e.nativeEvent.layout;X.current.setValue({x:r.width,y:r.height});for(var i,u=0,a=0,o=b(k.current);!(i=o()).done;){u+=i.value.width}for(var c,h=b(V.current);!(c=h()).done;){a+=c.value.height}for(var d=W(),l=d.maxRow,s=d.maxColumn,f=null!=(t=null==l?void 0:l.rowIndex)?t:-1;a<r.height;){f++;var x=g({rowIndex:f});if(a+=x,0===V.current.length)V.current.push(new y({y:0,height:x,rowIndex:f}));else{var I=V.current[V.current.length-1];V.current.push(new y({y:I.y+I.height,height:x,rowIndex:f}))}}for(var O=null!=(n=null==s?void 0:s.columnIndex)?n:-1;u<r.width;){O++;var A=m({columnIndex:O});if(u+=A,0===k.current.length)k.current.push(new w({x:0,width:A,columnIndex:O}));else{var p=k.current[k.current.length-1];k.current.push(new w({width:A,x:p.x+p.width,columnIndex:O}))}}f++;var j=g({rowIndex:f}),S=V.current[V.current.length-1];V.current.push(new y({y:S.y+S.height,height:j,rowIndex:f})),O++;var N=k.current[k.current.length-1],R=m({columnIndex:O});k.current.push(new w({width:R,x:N.x+N.width,columnIndex:O})),C.current=[];for(var Y=0;Y<V.current.length;Y++)for(var E=V.current[Y],H=0;H<k.current.length;H++){var M=k.current[H];C.current.push(new v({column:M,row:E}))}J((function(e){return e+1}))}),[m,g,W]),E=Object(r.useCallback)((function(e){var t=JSON.parse(JSON.stringify(R.current)),r=t.x,u=t.y,a=JSON.parse(JSON.stringify(X.current)),o=a.x,c=a.y,h=!1,d={deltaX:0,deltaY:0},l=W(),s=l.minColumn,f=l.maxColumn,x=l.minRow,w=l.maxRow,y=e.deltaX,v=e.deltaY,I=f.columnIndex,O=f.x+f.width+r-o,A=w.rowIndex,p=w.y+w.height+u-c;if(y>0){for(;y>O&&I!==n;){if(++I-f.columnIndex>=k.current.length-2){h=!0;break}O+=m({columnIndex:I})}y=Math.min(O,y),h&&(d.deltaX=e.deltaX-y)}if(v>0){for(;v>p&&A!==i;){if(++A-w.rowIndex>=V.current.length-2){h=!0;break}p+=g({rowIndex:A})}v=Math.min(p,v),h&&(d.deltaY=e.deltaY-v)}r-y>0&&(y=r),u-v>0&&(v=u);var j=r-y,S=u-v;R.current.setValue({x:j,y:S});var N=[],J=[],Y=[];if(y>0){for(var H=0;H<k.current.length;H++){var M=k.current[H];M.x+j+M.width<0&&N.push(M)}if(N.length===k.current.length&&console.error("This shoud not happen"),N.length>0)for(var F=0;F<N.length;F++){var L=N[F];L.xAnimated.setValue(f.x+f.width),L.columnIndex=f.columnIndex+1;var T=m(L);L.widthAnimated.setValue(T),f=L}}if(y<0){for(var _=0;_<k.current.length;_++){var G=k.current[_];G.x+j>o&&N.unshift(G)}if(N.length>0)for(var q=0;q<N.length&&0!==s.columnIndex;q++){var U=N[q];U.columnIndex=s.columnIndex-1;var $=m(U);U.widthAnimated.setValue($),U.xAnimated.setValue(s.x-$),s=U}}if(v>0){for(var z=0;z<V.current.length;z++){var B=V.current[z];B.y+S+B.height<0&&J.push(B)}if(J.length===V.current.length&&console.error("Warning: This shoud not happen"),J.length>0)for(var D=0;D<J.length;D++){var K=J[D];K.rowIndex=w.rowIndex+1,K.yAnimated.setValue(w.y+w.height);var P=g(K);K.heightAnimated.setValue(P),w=K}}if(v<0){for(var Q=0;Q<V.current.length;Q++){var Z=V.current[Q];Z.y+S>c&&J.unshift(Z)}if(J.length>0)for(var ee=0;ee<J.length&&0!==x.rowIndex;ee++){var te=J[ee];te.rowIndex=x.rowIndex-1;var ne=g(te);te.heightAnimated.setValue(ne),te.yAnimated.setValue(x.y-te.height),x=te}}for(var re=0;re<C.current.length;re++){var ie=C.current[re];Y.includes(ie)||(N.includes(ie.column)||J.includes(ie.row))&&Y.push(ie)}if(!h)for(var ue,ae=b(Y);!(ue=ae()).done;){var oe=ue.value;oe.ref.current.update({rowIndex:oe.row.rowIndex,columnIndex:oe.column.columnIndex})}h&&(console.log("splitAction",d),requestAnimationFrame((function(){E(d)})))}),[m,W,n,i,g]),H=Object(r.useCallback)((function(e){var t=e.deltaX,n=e.deltaY;E({deltaX:t,deltaY:n})}),[E]);return Object(r.useEffect)((function(){if("web"===d.a.OS){var e=p.current;return e.addEventListener("wheel",H),function(){e.removeEventListener("wheel",H)}}}),[H]),Object(l.jsxs)(a.a,{ref:p,style:[t,{overflow:"hidden"}],onLayout:Y,children:[I&&Object(l.jsx)(r.Fragment,{children:k.current.map((function(e,t){return Object(l.jsx)(h.a.View,{style:{position:"absolute",width:1,backgroundColor:"#ccc",transform:[{translateX:h.a.add(e.xAnimated,R.current.x)}],height:X.current.y}},t)}))},"columns-"+N),A&&Object(l.jsx)(r.Fragment,{children:V.current.map((function(e,t){return Object(l.jsx)(h.a.View,{style:{position:"absolute",backgroundColor:"#ccc",transform:[{translateY:h.a.add(e.yAnimated,R.current.y)}],width:X.current.x,height:1}},t)}))},"rows-"+N),Object(l.jsx)(r.Fragment,{children:C.current.map((function(e,t){return Object(l.jsx)(s,{coordinate:R.current,ref:e.ref,column:e.column,row:e.row,renderCell:u},t)}))},"cells-"+N)]})}function A(){var e=Object(u.a)(),t=e.width,n=e.height;return Object(l.jsx)(O,{columnCount:Number.MAX_SAFE_INTEGER,rowCount:Number.MAX_SAFE_INTEGER,style:{borderWidth:1,borderColor:"#000",width:t,height:n},getColumnWidth:function(e){return[100,140,200,120][e.columnIndex%4]},getRowHeight:function(e){return[40,50,60,90,40,45,40,50,55,50,60][e.rowIndex%10]},renderCell:function(e){return Object(l.jsxs)(a.a,{style:{flex:1,backgroundColor:(e.rowIndex+e.columnIndex)%2===1?"#eee":"#fff",borderTopWidth:1,borderLeftWidth:1,borderColor:"#ccc",padding:4},children:[Object(l.jsxs)(i.a,{children:["c: ",e.columnIndex]}),Object(l.jsxs)(i.a,{children:["r: ",e.rowIndex]})]})}})}},91:function(e,t,n){e.exports=n(116)}},[[91,1,2]]]);
//# sourceMappingURL=app.414ec308.chunk.js.map